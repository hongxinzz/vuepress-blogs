<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工程化工具 | FreddZhuo学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="学习笔记">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.7cbaeff5.css" as="style"><link rel="preload" href="/assets/js/app.6a4be722.js" as="script"><link rel="preload" href="/assets/js/2.7e1709eb.js" as="script"><link rel="preload" href="/assets/js/21.937e6ba1.js" as="script"><link rel="prefetch" href="/assets/js/10.e3b8489d.js"><link rel="prefetch" href="/assets/js/11.09fdbb9b.js"><link rel="prefetch" href="/assets/js/12.7e52a761.js"><link rel="prefetch" href="/assets/js/13.8132c992.js"><link rel="prefetch" href="/assets/js/14.39418901.js"><link rel="prefetch" href="/assets/js/15.5ab452f0.js"><link rel="prefetch" href="/assets/js/16.271c4fdf.js"><link rel="prefetch" href="/assets/js/17.ca8d52a1.js"><link rel="prefetch" href="/assets/js/18.0ca26d93.js"><link rel="prefetch" href="/assets/js/19.dc6df426.js"><link rel="prefetch" href="/assets/js/20.d41804b3.js"><link rel="prefetch" href="/assets/js/22.04c957ee.js"><link rel="prefetch" href="/assets/js/23.312ec329.js"><link rel="prefetch" href="/assets/js/24.52d939a3.js"><link rel="prefetch" href="/assets/js/25.b8d93ff2.js"><link rel="prefetch" href="/assets/js/26.7d4c2091.js"><link rel="prefetch" href="/assets/js/27.7f6f9e16.js"><link rel="prefetch" href="/assets/js/28.2887b2cd.js"><link rel="prefetch" href="/assets/js/29.01e871d3.js"><link rel="prefetch" href="/assets/js/3.1794f74f.js"><link rel="prefetch" href="/assets/js/30.0d16d404.js"><link rel="prefetch" href="/assets/js/31.98937233.js"><link rel="prefetch" href="/assets/js/32.7c6bfb79.js"><link rel="prefetch" href="/assets/js/33.a7490a07.js"><link rel="prefetch" href="/assets/js/34.1dc7c3e0.js"><link rel="prefetch" href="/assets/js/35.18fec0ae.js"><link rel="prefetch" href="/assets/js/36.b880c8db.js"><link rel="prefetch" href="/assets/js/37.cf37f0fa.js"><link rel="prefetch" href="/assets/js/38.b8b3d2e1.js"><link rel="prefetch" href="/assets/js/39.7c78a005.js"><link rel="prefetch" href="/assets/js/4.186adf39.js"><link rel="prefetch" href="/assets/js/5.f9676b1f.js"><link rel="prefetch" href="/assets/js/6.b1533a7f.js"><link rel="prefetch" href="/assets/js/7.de1815b5.js"><link rel="prefetch" href="/assets/js/8.3f7b6eb9.js"><link rel="prefetch" href="/assets/js/9.57078175.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7cbaeff5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">FreddZhuo学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="https://github.com/hongxinzz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="https://github.com/hongxinzz/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>必会基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>手写代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端工程化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack/工程化工具.html" class="active sidebar-link">工程化工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/工程化工具.html#解决了什么" class="sidebar-link">解决了什么</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/工程化工具.html#yeoman" class="sidebar-link">Yeoman</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/工程化工具.html#gulp" class="sidebar-link">Gulp</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/工程化工具.html#grunt" class="sidebar-link">Grunt</a></li></ul></li><li><a href="/blog/webpack/模块化.html" class="sidebar-link">模块化</a></li><li><a href="/blog/webpack/webpack基础.html" class="sidebar-link">webpack基础</a></li><li><a href="/blog/webpack/基础配置.html" class="sidebar-link">webpack基础配置</a></li><li><a href="/blog/webpack/entry延伸.html" class="sidebar-link">webpack 入口</a></li><li><a href="/blog/webpack/webpack性能优化.html" class="sidebar-link">webpack性能优化</a></li><li><a href="/blog/webpack/webpack打包流程.html" class="sidebar-link">webpack打包流程</a></li><li><a href="/blog/webpack/webpack核心原理.html" class="sidebar-link">webpack核心原理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="工程化工具"><a href="#工程化工具" class="header-anchor">#</a> 工程化工具</h1> <h2 id="解决了什么"><a href="#解决了什么" class="header-anchor">#</a> 解决了什么</h2> <blockquote><p>一切重复的工作都应该被自动化。</p></blockquote> <ol><li>无法使用模块化/组件化</li> <li>重复是机械工作</li> <li>代码风格统一、质量保证</li> <li>依赖后端服务接口偶支持</li> <li>整体依赖后端项目</li></ol> <ul><li>工程化 ≠ 工具
工程化不是用了webpack或者某个工具就是 工程化，而是对整个程序的架构。
</li></ul> <h2 id="yeoman"><a href="#yeoman" class="header-anchor">#</a> Yeoman</h2> <h3 id="开发准备"><a href="#开发准备" class="header-anchor">#</a> 开发准备</h3> <p>开发 Yeoman 模板，需预先安装yo</p> <div class="language-js extra-class"><pre class="language-js"><code> npm i <span class="token operator">-</span>g yo
</code></pre></div><p>手脚架generator-generator</p> <div class="language-js extra-class"><pre class="language-js"><code>npm i <span class="token operator">-</span>g generator<span class="token operator">-</span>generator
</code></pre></div><p>安装后，进入开发目录，运行:</p> <div class="language-js extra-class"><pre class="language-js"><code>yo generator
</code></pre></div><h3 id="开发准备-2"><a href="#开发准备-2" class="header-anchor">#</a> 开发准备</h3> <ul><li><code>.yo-rc.json</code> 用于存储项目配置，一般不会用到，无需关注</li> <li><code>package.json</code> npm 项目信息文件，主要关注 author、version 域即可</li> <li><code>generators</code> 目录即项目模板代码</li> <li><code>generators/templates</code> 用于存放项目模板文件</li> <li><code>generators/app/index.js</code> 定义项目手脚架的代码</li></ul> <h3 id="开发"><a href="#开发" class="header-anchor">#</a> 开发</h3> <blockquote><p>每个generator都会继承yeoman-generator类，即上述的generators/app/index.js文件。该类有几个重要的生命周期节点：</p></blockquote> <ul><li><code>initializing</code> - 初始化方法，用于获取项目状态、配置等</li> <li><code>prompting</code> - 调用inquire方法获取用户输入</li> <li><code>configuring</code> - 保存配置，创建 .editorconfig 等文件</li> <li><code>writing</code> - 执行文件写操作，即项目文件写入文件系统中</li> <li><code>install</code> - 执行安装操作，需调用 this.installDependencies 方法</li> <li><code>end</code> - 最后执行，可清楚临时文件等</li></ul> <blockquote><p>yo 提供mem-fs-editor实例接口，包含一系列fs工具：</p></blockquote> <p><code>this.fs.read</code> - 读取文件
<code>this.fs.readJSON</code> - 以JSON方式读取文件
<code>this.fs.write</code> - 写文件
<code>this.fs.writeJson</code> - 以JSON 方式写文件
<code>this.fs.append</code> - 将内容已追加方式写入文件
<code>this.fs.extendJSON</code> - 扩展JSON文件内容
<code>this.fs.delete</code> - 删除文件</p> <p>此外，还有一系列路劲及模板接口：</p> <p><code>this.fs.copyTpl</code> - 复制模板文件，并按参数解析模板内容，写入目标文件中
<code>this.templatePath</code> - 返回模板文件路径，即上述 generator/app/templates 中的文件路径
<code>this.destinationPath</code> - 返回目标文件路径，即执行 yo 生成模板文件的路径
<code>this.registerTransformStream</code> - 生命钩子接口，用于转化文件内容，兼容gulp插件</p> <h2 id="gulp"><a href="#gulp" class="header-anchor">#</a> Gulp</h2> <h1 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h1> <blockquote><p>类似于 Yeoman</p></blockquote> <h3 id="api"><a href="#api" class="header-anchor">#</a> Api</h3> <blockquote><p>gulp 自带的一些api <code>src</code>, <code>dest</code>, <code>parallel</code>, <code>series</code>, <code>watch</code></p></blockquote> <ul><li>src 读取文件目录</li> <li>dest 放到指定的目录</li> <li>parallel 任务</li> <li>series 依赖的任务</li> <li>watch 监听</li></ul> <h3 id="常见配置"><a href="#常见配置" class="header-anchor">#</a> 常见配置</h3> <ul><li>sass</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 样式</span>
<span class="token keyword">const</span> <span class="token function-variable function">style</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//  src目标位置 base 拷贝文件夹  src =&gt;/assets/styles/*.scss</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;src/assets/styles/*.scss&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;src&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">// 一般插件都是提供一个方法</span>
            <span class="token comment">// 以_xxx.scss 会认为是主文件私有的css，会打在一个css上</span>
            <span class="token comment">// outputStyle 格式化css</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">sass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> outputStyle<span class="token operator">:</span> <span class="token string">&quot;expanded&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// 放到哪里去  一般放到dist</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// 推流</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>bs<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> stream<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>es6</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">script</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;src/assets/scripts/*.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;src&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">//es6</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span> presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>bs<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> stream<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>img 图片压缩</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 图片</span>
<span class="token keyword">const</span> <span class="token function-variable function">image</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;src/assets/images/**&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;src&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>swig 模板引擎</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 模板引擎</span>
<span class="token comment">// swig  可以传递data</span>
<span class="token keyword">const</span> <span class="token function-variable function">html</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;src/*.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;src&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">swig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cache<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>bs<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> stream<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>extra</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  额外任务</span>
<span class="token keyword">const</span> <span class="token function-variable function">extra</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;public/**&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;public&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>useref 文件压缩</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">useRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;temp/*.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">&quot;temp&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">useref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> searchPath<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;temp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// 压缩</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> plugins<span class="token punctuation">.</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> plugins<span class="token punctuation">.</span><span class="token function">cleanCss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// collapseWhitespace  空格</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
                plugins<span class="token punctuation">.</span><span class="token function">if</span><span class="token punctuation">(</span>
                    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    plugins<span class="token punctuation">.</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                        minifyCSS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                        minifyJS<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>clean 文件清除</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">clean</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">// temp 临时目录</span>
   <span class="token comment">// 流程 文件构建的时候先放到temp里面 然后再把temp的文件放到dist</span>
   <span class="token keyword">return</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;temp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>gulp-load-plugins 自动加载插件</p></li> <li><p>browser-sync 热加载</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 热加载</span>
<span class="token keyword">const</span> browserSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;browser-sync&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  创建一个服务器</span>
<span class="token keyword">const</span> bs <span class="token operator">=</span> browserSync<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="开发配置"><a href="#开发配置" class="header-anchor">#</a> 开发配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>
    clean<span class="token punctuation">,</span>
    <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> useRef<span class="token punctuation">)</span><span class="token punctuation">,</span> font<span class="token punctuation">,</span> image<span class="token punctuation">,</span> extra<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> develop <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> serve<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="grunt"><a href="#grunt" class="header-anchor">#</a> Grunt</h2> <p>类似于gulp</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/V8.html" class="prev">
        V8垃圾回收
      </a></span> <span class="next"><a href="/blog/webpack/模块化.html">
        模块化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6a4be722.js" defer></script><script src="/assets/js/2.7e1709eb.js" defer></script><script src="/assets/js/21.937e6ba1.js" defer></script>
  </body>
</html>
